<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>JSON a Inputs</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      textarea {
        width: 100%;
        height: 150px;
      }
      .container {
        margin-top: 20px;
      }
      .pair {
        margin-bottom: 10px;
        display: flex;
        gap: 10px;
      }
      input {
        width: 100%;
        padding: 5px;
      }
      button {
        padding: 5px 10px;
      }
    </style>
  </head>
  <body>
    <h2>JSON a Inputs Clave/Valor</h2>
    <textarea id="jsonInput" placeholder="Pega tu JSON aquí"></textarea>
    <br />
    <button onclick="generateInputs()">Generar Inputs</button>

    <div class="container" id="inputsContainer"></div>

    <script>
      function flattenJSON(obj, prefix = "") {
        const result = [];
        for (const key in obj) {
          const value = obj[key];
          const fullKey = prefix ? `${prefix}.${key}` : key;
          if (
            value !== null &&
            typeof value === "object" &&
            !Array.isArray(value)
          ) {
            result.push(...flattenJSON(value, fullKey));
          } else {
            result.push({ key: fullKey, value: value });
          }
        }
        return result;
      }

      function generateInputs() {
        const container = document.getElementById("inputsContainer");
        container.innerHTML = ""; // limpiar

        let jsonText = document.getElementById("jsonInput").value;
        let parsed;
        try {
          parsed = JSON.parse(jsonText);
        } catch (e) {
          alert("JSON inválido");
          return;
        }

        const pairs = flattenJSON(parsed);
        pairs.forEach((pair) => {
          const div = document.createElement("div");
          div.className = "pair";
          const keyInput = document.createElement("input");
          keyInput.type = "text";
          keyInput.value = pair.key;
          const valueInput = document.createElement("input");
          valueInput.type = "text";
          valueInput.value = pair.value;
          div.appendChild(keyInput);
          div.appendChild(valueInput);
          container.appendChild(div);
        });
      }
    </script>
  </body>
</html>
